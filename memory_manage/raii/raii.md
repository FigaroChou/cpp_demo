## 第三章 RAII

### 一、概述
**RAII**: 
- 资源获取即初始化（Resource Acquisition Is Initialization）
- 使用对象生命周期管理资源
- 对象创建时，获取资源；销毁时，释放资源

### 二、RAII的实现
#### 2.1 智能指针的演变
指针使用场景:
- 多函数/多线程共享内存区域
- 减少拷贝
指针功能一的容易出问题的场景:
- 释放内存无法同步信息，容易造成悬空指针
- 不主动释放，导致内存泄露
解决思路:
- 共享指针时，能知晓引用数量
- 释放时，不需要手动释放
实现思路:
- 将封装指针
- 添加能被共享的计数器，知晓使用情况
- 使用RAII的思想：构造对象时，增加引用；析构时，减少引用，若为最后一个引用者，则释放资源
实现细节:
- 计数器的选择: 
  - 和引用对象共享内存，指定固定数量的字节，好处是，若产生竞态条件，可一次兼顾多个资源[个人理解]
  - 单独的计数器，好处是，计数器可以独立于资源对象存在，若计数器为宽泛概念，方便扩展
- 释放资源时机: 引用计数为0